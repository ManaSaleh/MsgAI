{% extends "base.html" %}
{% block content %}
<h2>Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h2>

<!-- Filter Dropdown -->
<div class="filters">
    <div class="filter-form">
        <label for="importance-filter">Ø¹Ø±Ø¶:</label>
        <select id="importance-filter">
            <option value="all">Ø§Ù„ÙƒÙ„ğŸ“„</option>
            <option value="important">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙ‚Ø·â—</option>
        </select>
    </div>
</div>

<!-- Cards Container -->
<div class="cards-container">
    {% set sorted_categories = messages|groupby('Predicted Category')|sort(attribute='grouper', reverse=true) %}
    {% for category, group in sorted_categories %}
    <div class="card">
        <h3>
            {% if category == "Ø§Ù„Ø­ÙƒÙˆÙ…Ø©" %}
                <i class="fas fa-landmark"></i> <!-- Icon for Ø§Ù„Ø­ÙƒÙˆÙ…Ø© -->
            {% elif category == "Ø§Ù„ØªØ¹Ù„ÙŠÙ…" %}
                <i class="fas fa-graduation-cap"></i> <!-- Icon for Ø§Ù„ØªØ¹Ù„ÙŠÙ… -->
            {% elif category == "Ø§Ù„Ù…Ø§Ù„ÙŠØ©" %}
                <i class="fas fa-coins"></i> <!-- Icon for Ø§Ù„Ù…Ø§Ù„ÙŠØ© -->
            {% elif category == "Ø§Ù„ØµØ­Ø©" %}
                <i class="fas fa-heartbeat"></i> <!-- Icon for Ø§Ù„ØµØ­Ø© -->
            {% elif category == "Ø£Ø®Ø±Ù‰" %}
                <i class="fas fa-question-circle"></i> <!-- Icon for Ø£Ø®Ø±Ù‰ -->
            {% elif category == "Ø§Ù„Ø¹Ø±ÙˆØ¶" %}
                <i class="fas fa-tags"></i> <!-- Icon for Ø§Ù„Ø¹Ø±ÙˆØ¶ -->
            {% elif category == "Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø£Ùˆ Ø§Ù„Ù…ØªØ§Ø¬Ø±" %}
                <i class="fas fa-store"></i> <!-- Icon for Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø£Ùˆ Ø§Ù„Ù…ØªØ§Ø¬Ø± -->
            {% elif category == "Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª" %}
                <i class="fas fa-phone-alt"></i> <!-- Icon for Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª -->
            {% elif category == "Ø§Ù„Ø³ÙØ±" %}
                <i class="fas fa-plane"></i> <!-- Icon for Ø§Ù„Ø³ÙØ± -->
            {% endif %}
            {{ category }}
        </h3>
        <div class="messages-container" style="display: none;">
            {% for message in group %}
            <div class="message {% if message['is_important'] %}important{% else %}not-important{% endif %}">
                <p><strong>Ø§Ù„Ù…Ø±Ø³Ù„:</strong> {{ message['Sender'] }}</p>
                <p><strong>Ø§Ù„Ù…Ø­ØªÙˆÙ‰:</strong> {{ message['Message Content'] }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>

<!-- Modal -->
<div id="message-modal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2 id="modal-category"></h2>
        <div id="modal-messages" class="modal-body"></div>
    </div>
</div>
{% endblock %}